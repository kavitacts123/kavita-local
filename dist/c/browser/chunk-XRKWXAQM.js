import{a as y,b as M,c as x}from"./chunk-MZ4H2IBJ.js";import"./chunk-YZPVKJHJ.js";import{Hc as h,Kc as v,Mc as I,P as s,Pc as m,Qc as k,Rc as C,S as g,W as u,X as c,Yb as p,pe as S,ta as n,ue as j}from"./chunk-MV3MVNGJ.js";var T=(()=>{let o=class o{constructor(i,e,a,l){this.route=i,this.authService=e,this.router=a,this.dialog=l,this.authGoogleService=g(M),this.token="",this.tokenVerified=!1}ngOnInit(){console.log("ng onit");let i=this.authGoogleService.getToken(),e=this.authGoogleService.getProfile();console.log(i,e);let a=localStorage.getItem("lang")||"",l=C.targetDomain?.domain||"ch";i==null&&this.router.navigate(["/"]);let F={email:e.email,lang:a,domain:l};this.authService.googleLogin(F).subscribe(r=>{if(console.log("Login response:",r),r.status===!1)console.error("Login failed:",r.message),this.router.navigate(["/"]);else{console.log("Login successful.");let f=r.data.token,d=r.data.user_data;console.log(d,"check user data index "),localStorage.setItem("authToken",f);let L=localStorage.getItem("authToken");localStorage.setItem("userData",JSON.stringify(d)),L===f?(console.log("Token successfully saved to local storage."),this.router.navigate(["/admin/dashboard"])):console.error("Failed to save token to local storage.")}},r=>{console.error("An error occurred while logging in:",r)})}};o.\u0275fac=function(e){return new(e||o)(n(v),n(k),n(I),n(S))},o.\u0275cmp=u({type:o,selectors:[["app-validate-user"]],decls:0,vars:0,template:function(e,a){}});let t=o;return t})();var N=[{path:"",component:x},{path:"",component:y},{path:"validate-user",component:T}],w=(()=>{let o=class o{};o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=c({type:o}),o.\u0275inj=s({imports:[m.forChild(N),m]});let t=o;return t})();var to=(()=>{let o=class o{};o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=c({type:o}),o.\u0275inj=s({imports:[p,w,h,j]});let t=o;return t})();export{to as WebsiteModule};
